<!-- Teacher Dashboard -->
<div class="dashboard-container">
    <!-- Dashboard Title -->
    <div class="dashboard-welcome mb-4">
        <h1 class="dashboard-title h3">
            <i class="fas fa-chalkboard-teacher text-primary me-2"></i>
            Teacher Dashboard
        </h1>
        <p class="dashboard-subtitle text-muted mb-0">Welcome back, {{ currentUser?.firstName || currentUser?.username
            }}!</p>
        <!-- Debug button -->
        <button class="btn btn-primary btn-sm mt-2" (click)="forceReload()">
            <i class="fas fa-refresh"></i>
            Reload Data
        </button>
        <p class="text-muted mt-2">Loading: {{ isLoading }}, Stats: {{ stats ? 'Loaded' : 'None' }}, Courses: {{
            courses.length }}, Assignments: {{ assignments.length }}</p>
    </div>

    <!-- Loading State -->
    <div class="loading-container" *ngIf="isLoading">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading dashboard data...</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="dashboard-content" *ngIf="!isLoading">
        <!-- Stats Cards -->
        <section class="stats-section">
            <div class="stats-grid">
                <div class="stat-card primary">
                    <div class="stat-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats?.totalCourses || 0 }}</h3>
                        <p class="stat-label">My Courses</p>
                    </div>
                </div>

                <div class="stat-card success">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats?.totalStudents || 0 }}</h3>
                        <p class="stat-label">Total Students</p>
                    </div>
                </div>

                <div class="stat-card warning">
                    <div class="stat-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats?.upcomingAssignments || 0 }}</h3>
                        <p class="stat-label">Pending Assignments</p>
                    </div>
                </div>

                <div class="stat-card info">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <h3 class="stat-number">{{ stats?.averageGrade || 0 }}%</h3>
                        <p class="stat-label">Average Grade</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Grid -->
        <div class="dashboard-grid">
            <!-- Courses Section -->
            <section class="dashboard-section courses-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-book"></i>
                        My Courses
                    </h2>
                    <button class="btn btn-primary btn-sm">
                        <i class="fas fa-plus"></i>
                        New Course
                    </button>
                </div>

                <div class="courses-grid">
                    <div class="course-card" *ngFor="let course of courses">
                        <div class="course-header">
                            <h3 class="course-title">{{ course.title }}</h3>
                            <span class="badge" [class]="'badge-' + getStatusColor(course.status)">
                                {{ course.status }}
                            </span>
                        </div>
                        <p class="course-description">{{ course.description }}</p>
                        <div class="course-meta">
                            <div class="meta-item">
                                <i class="fas fa-users"></i>
                                <span>{{ course.enrolled }} students</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-clock"></i>
                                <span>{{ course.duration }}</span>
                            </div>
                            <div class="meta-item">
                                <i class="fas fa-star"></i>
                                <span>{{ course.rating }}/5</span>
                            </div>
                        </div>
                        <div class="course-actions">
                            <button class="btn btn-outline btn-sm">
                                <i class="fas fa-eye"></i>
                                View
                            </button>
                            <button class="btn btn-primary btn-sm">
                                <i class="fas fa-edit"></i>
                                Edit
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Assignments Section -->
            <section class="dashboard-section assignments-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-tasks"></i>
                        Recent Assignments
                    </h2>
                    <button class="btn btn-primary btn-sm">
                        <i class="fas fa-plus"></i>
                        New Assignment
                    </button>
                </div>

                <div class="assignments-list">
                    <div class="assignment-item" *ngFor="let assignment of assignments">
                        <div class="assignment-content">
                            <h4 class="assignment-title">{{ assignment.title }}</h4>
                            <p class="assignment-course">{{ assignment.course }}</p>
                            <div class="assignment-meta">
                                <span class="due-date">
                                    <i class="fas fa-calendar"></i>
                                    Due: {{ formatDate(assignment.dueDate) }}
                                </span>
                            </div>
                        </div>
                        <div class="assignment-status">
                            <span class="badge" [class]="'badge-' + getStatusColor(assignment.status)">
                                {{ assignment.status }}
                            </span>
                            <div class="assignment-actions">
                                <button class="btn btn-outline btn-sm">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-primary btn-sm">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions -->
            <section class="dashboard-section quick-actions-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-bolt"></i>
                        Quick Actions
                    </h2>
                </div>

                <div class="quick-actions">
                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-plus-circle"></i>
                        </div>
                        <div class="action-content">
                            <h4>Create Course</h4>
                            <p>Start a new course for your students</p>
                        </div>
                    </button>

                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <div class="action-content">
                            <h4>Create Assignment</h4>
                            <p>Add a new assignment to your courses</p>
                        </div>
                    </button>

                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="action-content">
                            <h4>View Analytics</h4>
                            <p>Check student progress and performance</p>
                        </div>
                    </button>

                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="action-content">
                            <h4>Manage Students</h4>
                            <p>View and manage enrolled students</p>
                        </div>
                    </button>

                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="action-content">
                            <h4>Messages</h4>
                            <p>Communicate with your students</p>
                        </div>
                    </button>

                    <button class="action-card">
                        <div class="action-icon">
                            <i class="fas fa-cog"></i>
                        </div>
                        <div class="action-content">
                            <h4>Settings</h4>
                            <p>Manage your account preferences</p>
                        </div>
                    </button>
                </div>
            </section>

            <!-- Recent Activity -->
            <section class="dashboard-section activity-section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-history"></i>
                        Recent Activity
                    </h2>
                </div>

                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-upload"></i>
                        </div>
                        <div class="activity-content">
                            <p class="activity-text">Uploaded new course material for Angular Development</p>
                            <span class="activity-time">2 hours ago</span>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-check"></i>
                        </div>
                        <div class="activity-content">
                            <p class="activity-text">Graded 15 assignments for React Fundamentals</p>
                            <span class="activity-time">1 day ago</span>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <div class="activity-content">
                            <p class="activity-text">Created new assignment: TypeScript Advanced Types</p>
                            <span class="activity-time">2 days ago</span>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon">
                            <i class="fas fa-message"></i>
                        </div>
                        <div class="activity-content">
                            <p class="activity-text">Replied to 8 student messages</p>
                            <span class="activity-time">3 days ago</span>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>